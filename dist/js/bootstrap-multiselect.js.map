{"version":3,"sources":["../../src/js/bootstrap-multiselect.js"],"names":["$","ko","bindingHandlers","multiselect","after","init","element","valueAccessor","allBindings","viewModel","bindingContext","$element","config","toJS","has","options","get","isObservable","computed","read","setTimeout","ms","data","updateOriginalOptions","disposeWhenNodeIsRemoved","value","extend","rateLimit","notifyWhenChangesStop","selectedOptions","setEnabled","enable","disable","utils","domNodeDisposal","addDisposeCallback","update","forEach","array","callback","index","length","Multiselect","select","$select","mergeOptions","attr","nonSelectedText","originalOptions","clone","query","searchTimeout","lastToggledInput","multiple","onChange","proxy","onSelectAll","onDeselectAll","onDropdownShow","onDropdownHide","onDropdownShown","onDropdownHidden","onInitialized","onFiltering","buildContainer","buildButton","buildDropdown","buildSelectAll","buildDropdownOptions","buildFilter","updateButtonText","updateSelectAll","enableClickableOptGroups","updateOptGroups","wasDisabled","prop","disableIfEmpty","wrap","$container","prototype","defaults","buttonText","disabledText","allSelectedText","selectAllNumber","numberDisplayed","nSelectedText","selected","delimiter","delimiterText","each","label","undefined","text","substr","buttonTitle","checkboxName","option","optionLabel","optionClass","checked","event","$filter","enableHTML","buttonClass","inheritClass","buttonWidth","buttonContainer","dropRight","dropUp","selectedClass","maxHeight","includeSelectAllOption","includeSelectAllIfMoreThan","selectAllText","selectAllValue","selectAllName","selectAllJustVisible","enableFiltering","enableCaseInsensitiveFiltering","enableFullValueFiltering","enableCollapsibleOptGroups","filterPlaceholder","filterBehavior","includeFilterClearBtn","preventInputChangeEvent","templates","button","ul","filter","filterClearBtn","li","divider","liGroup","constructor","on","$button","addClass","css","tabindex","prepend","$ul","height","Math","min","moveCalc","append","children","tag","toLowerCase","createOptgroup","createDivider","createOptionValue","$target","target","isSelectAllOption","val","closest","removeClass","$option","getOptionByValue","$optionsNotThis","not","$checkboxesNotThis","selectAll","deselectAll","click","change","e","shiftKey","stopPropagation","is","preventDefault","find","from","to","tmp","range","slice","toggleClass","i","j","$checkbox","trigger","blur","off","keyCode","hasClass","$items","$current","eq","focus","$li","$group","nextUntil","$inputs","values","$options","input","push","visible","hide","show","classes","inputType","$label","html","name","parent","$divider","group","toString","alreadyHasSelectAll","hasSelectAll","includeSelectAllDivider","enableFilterLength","max","clearBtn","clearTimeout","which","asyncFunction","currentGroup","currentGroupVisible","filterCandidate","showElement","valueToMatch","trim","substring","indexOf","toggle","destroy","remove","refresh","inputs","map","$elem","$input","selectValues","triggerOnChange","isArray","getInputByValue","clearSelection","deselect","deselectValues","justVisible","triggerOnSelectAll","allLis","visibleLis","triggerOnDeselectAll","rebuild","dataprovider","groupCounter","empty","$tag","disabled","subOption","attributes","title","key","class","setOptions","$groups","notTriggerOnSelectAll","allBoxes","allBoxesLength","checkedBoxesLength","selectAllLi","selectAllInput","getSelected","valueToCompare","checkboxes","checkbox","timeout","self","args","Array","call","arguments","apply","window","setAllSelectedText","fn","parameter","extraOptions","Constructor","jQuery"],"mappings":"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","file":"bootstrap-multiselect.js","sourcesContent":["/**\r\n * Bootstrap Multiselect (https://github.com/davidstutz/bootstrap-multiselect)\r\n *\r\n * Apache License, Version 2.0:\r\n * Copyright (c) 2012 - 2015 David Stutz\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\r\n * use this file except in compliance with the License. You may obtain a\r\n * copy of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\r\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\r\n * License for the specific language governing permissions and limitations\r\n * under the License.\r\n *\r\n * BSD 3-Clause License:\r\n * Copyright (c) 2012 - 2015 David Stutz\r\n * All rights reserved.\r\n *\r\n * Redistribution and use in source and binary forms, with or without\r\n * modification, are permitted provided that the following conditions are met:\r\n *    - Redistributions of source code must retain the above copyright notice,\r\n *      this list of conditions and the following disclaimer.\r\n *    - Redistributions in binary form must reproduce the above copyright notice,\r\n *      this list of conditions and the following disclaimer in the documentation\r\n *      and/or other materials provided with the distribution.\r\n *    - Neither the name of David Stutz nor the names of its contributors may be\r\n *      used to endorse or promote products derived from this software without\r\n *      specific prior written permission.\r\n *\r\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\r\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,\r\n * THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\r\n * PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR\r\n * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\r\n * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\r\n * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;\r\n * OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,\r\n * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR\r\n * OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\r\n * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n */\r\n!function ($) {\r\n    \"use strict\";// jshint ;_;\r\n\r\n    if (typeof ko !== 'undefined' && ko.bindingHandlers && !ko.bindingHandlers.multiselect) {\r\n        ko.bindingHandlers.multiselect = {\r\n            after: ['options', 'value', 'selectedOptions', 'enable', 'disable'],\r\n\r\n            init: function(element, valueAccessor, allBindings, viewModel, bindingContext) {\r\n                var $element = $(element);\r\n                var config = ko.toJS(valueAccessor());\r\n\r\n                $element.multiselect(config);\r\n\r\n                if (allBindings.has('options')) {\r\n                    var options = allBindings.get('options');\r\n                    if (ko.isObservable(options)) {\r\n                        ko.computed({\r\n                            read: function() {\r\n                                options();\r\n                                setTimeout(function() {\r\n                                    var ms = $element.data('multiselect');\r\n                                    if (ms)\r\n                                        ms.updateOriginalOptions();//Not sure how beneficial this is.\r\n                                    $element.multiselect('rebuild');\r\n                                }, 1);\r\n                            },\r\n                            disposeWhenNodeIsRemoved: element\r\n                        });\r\n                    }\r\n                }\r\n\r\n                //value and selectedOptions are two-way, so these will be triggered even by our own actions.\r\n                //It needs some way to tell if they are triggered because of us or because of outside change.\r\n                //It doesn't loop but it's a waste of processing.\r\n                if (allBindings.has('value')) {\r\n                    var value = allBindings.get('value');\r\n                    if (ko.isObservable(value)) {\r\n                        ko.computed({\r\n                            read: function() {\r\n                                value();\r\n                                setTimeout(function() {\r\n                                    $element.multiselect('refresh');\r\n                                }, 1);\r\n                            },\r\n                            disposeWhenNodeIsRemoved: element\r\n                        }).extend({ rateLimit: 100, notifyWhenChangesStop: true });\r\n                    }\r\n                }\r\n\r\n                //Switched from arrayChange subscription to general subscription using 'refresh'.\r\n                //Not sure performance is any better using 'select' and 'deselect'.\r\n                if (allBindings.has('selectedOptions')) {\r\n                    var selectedOptions = allBindings.get('selectedOptions');\r\n                    if (ko.isObservable(selectedOptions)) {\r\n                        ko.computed({\r\n                            read: function() {\r\n                                selectedOptions();\r\n                                setTimeout(function() {\r\n                                    $element.multiselect('refresh');\r\n                                }, 1);\r\n                            },\r\n                            disposeWhenNodeIsRemoved: element\r\n                        }).extend({ rateLimit: 100, notifyWhenChangesStop: true });\r\n                    }\r\n                }\r\n\r\n                var setEnabled = function (enable) {\r\n                    setTimeout(function () {\r\n                        if (enable)\r\n                            $element.multiselect('enable');\r\n                        else\r\n                            $element.multiselect('disable');\r\n                    });\r\n                };\r\n\r\n                if (allBindings.has('enable')) {\r\n                    var enable = allBindings.get('enable');\r\n                    if (ko.isObservable(enable)) {\r\n                        ko.computed({\r\n                            read: function () {\r\n                                setEnabled(enable());\r\n                            },\r\n                            disposeWhenNodeIsRemoved: element\r\n                        }).extend({ rateLimit: 100, notifyWhenChangesStop: true });\r\n                    } else {\r\n                        setEnabled(enable);\r\n                    }\r\n                }\r\n\r\n                if (allBindings.has('disable')) {\r\n                    var disable = allBindings.get('disable');\r\n                    if (ko.isObservable(disable)) {\r\n                        ko.computed({\r\n                            read: function () {\r\n                                setEnabled(!disable());\r\n                            },\r\n                            disposeWhenNodeIsRemoved: element\r\n                        }).extend({ rateLimit: 100, notifyWhenChangesStop: true });\r\n                    } else {\r\n                        setEnabled(!disable);\r\n                    }\r\n                }\r\n\r\n                ko.utils.domNodeDisposal.addDisposeCallback(element, function() {\r\n                    $element.multiselect('destroy');\r\n                });\r\n            },\r\n\r\n            update: function(element, valueAccessor, allBindings, viewModel, bindingContext) {\r\n                var $element = $(element);\r\n                var config = ko.toJS(valueAccessor());\r\n\r\n                $element.multiselect('setOptions', config);\r\n                $element.multiselect('rebuild');\r\n            }\r\n        };\r\n    }\r\n\r\n    function forEach(array, callback) {\r\n        for (var index = 0; index < array.length; ++index) {\r\n            callback(array[index], index);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Constructor to create a new multiselect using the given select.\r\n     *\r\n     * @param {jQuery} select\r\n     * @param {Object} options\r\n     * @returns {Multiselect}\r\n     */\r\n    function Multiselect(select, options) {\r\n\r\n        this.$select = $(select);\r\n        this.options = this.mergeOptions($.extend({}, options, this.$select.data()));\r\n\r\n        // Placeholder via data attributes\r\n        if (this.$select.attr(\"data-placeholder\")) {\r\n            this.options.nonSelectedText = this.$select.data(\"placeholder\");\r\n        }\r\n\r\n        // Initialization.\r\n        // We have to clone to create a new reference.\r\n        this.originalOptions = this.$select.clone()[0].options;\r\n        this.query = '';\r\n        this.searchTimeout = null;\r\n        this.lastToggledInput = null;\r\n\r\n        this.options.multiple = this.$select.attr('multiple') === \"multiple\";\r\n        this.options.onChange = $.proxy(this.options.onChange, this);\r\n        this.options.onSelectAll = $.proxy(this.options.onSelectAll, this);\r\n        this.options.onDeselectAll = $.proxy(this.options.onDeselectAll, this);\r\n        this.options.onDropdownShow = $.proxy(this.options.onDropdownShow, this);\r\n        this.options.onDropdownHide = $.proxy(this.options.onDropdownHide, this);\r\n        this.options.onDropdownShown = $.proxy(this.options.onDropdownShown, this);\r\n        this.options.onDropdownHidden = $.proxy(this.options.onDropdownHidden, this);\r\n        this.options.onInitialized = $.proxy(this.options.onInitialized, this);\r\n        this.options.onFiltering = $.proxy(this.options.onFiltering, this);\r\n\r\n        // Build select all if enabled.\r\n        this.buildContainer();\r\n        this.buildButton();\r\n        this.buildDropdown();\r\n        this.buildSelectAll();\r\n        this.buildDropdownOptions();\r\n        this.buildFilter();\r\n\r\n        this.updateButtonText();\r\n        this.updateSelectAll(true);\r\n\r\n        if (this.options.enableClickableOptGroups && this.options.multiple) {\r\n            this.updateOptGroups();\r\n        }\r\n\r\n        this.options.wasDisabled = this.$select.prop('disabled');\r\n        if (this.options.disableIfEmpty && $('option', this.$select).length <= 0) {\r\n            this.disable();\r\n        }\r\n\r\n        this.$select.wrap('<span class=\"multiselect-native-select\" />').after(this.$container);\r\n        this.options.onInitialized(this.$select, this.$container);\r\n    }\r\n\r\n    Multiselect.prototype = {\r\n\r\n        defaults: {\r\n            /**\r\n             * Default text function will either print 'None selected' in case no\r\n             * option is selected or a list of the selected options up to a length\r\n             * of 3 selected options.\r\n             *\r\n             * @param {jQuery} options\r\n             * @param {jQuery} select\r\n             * @returns {String}\r\n             */\r\n            buttonText: function(options, select) {\r\n                if (this.disabledText.length > 0\r\n                        && (select.prop('disabled') || (options.length == 0 && this.disableIfEmpty)))  {\r\n\r\n                    return this.disabledText;\r\n                }\r\n                else if (options.length === 0) {\r\n                    return this.nonSelectedText;\r\n                }\r\n                else if (this.allSelectedText\r\n                        && options.length === $('option', $(select)).length\r\n                        && $('option', $(select)).length !== 1\r\n                        && this.multiple) {\r\n\r\n                    if (this.selectAllNumber) {\r\n                        return this.allSelectedText + ' (' + options.length + ')';\r\n                    }\r\n                    else {\r\n                        return this.allSelectedText;\r\n                    }\r\n                }\r\n                else if (options.length > this.numberDisplayed) {\r\n                    return options.length + ' ' + this.nSelectedText;\r\n                }\r\n                else {\r\n                    var selected = '';\r\n                    var delimiter = this.delimiterText;\r\n\r\n                    options.each(function() {\r\n                        var label = ($(this).attr('label') !== undefined) ? $(this).attr('label') : $(this).text();\r\n                        selected += label + delimiter;\r\n                    });\r\n\r\n                    return selected.substr(0, selected.length - this.delimiterText.length);\r\n                }\r\n            },\r\n            /**\r\n             * Updates the title of the button similar to the buttonText function.\r\n             *\r\n             * @param {jQuery} options\r\n             * @param {jQuery} select\r\n             * @returns {@exp;selected@call;substr}\r\n             */\r\n            buttonTitle: function(options, select) {\r\n                if (options.length === 0) {\r\n                    return this.nonSelectedText;\r\n                }\r\n                else {\r\n                    var selected = '';\r\n                    var delimiter = this.delimiterText;\r\n\r\n                    options.each(function () {\r\n                        var label = ($(this).attr('label') !== undefined) ? $(this).attr('label') : $(this).text();\r\n                        selected += label + delimiter;\r\n                    });\r\n                    return selected.substr(0, selected.length - this.delimiterText.length);\r\n                }\r\n            },\r\n            checkboxName: function(option) {\r\n                return false; // no checkbox name\r\n            },\r\n            /**\r\n             * Create a label.\r\n             *\r\n             * @param {jQuery} element\r\n             * @returns {String}\r\n             */\r\n            optionLabel: function(element){\r\n                return $(element).attr('label') || $(element).text();\r\n            },\r\n            /**\r\n             * Create a class.\r\n             *\r\n             * @param {jQuery} element\r\n             * @returns {String}\r\n             */\r\n            optionClass: function(element) {\r\n                return $(element).attr('class') || '';\r\n            },\r\n            /**\r\n             * Triggered on change of the multiselect.\r\n             *\r\n             * Not triggered when selecting/deselecting options manually.\r\n             *\r\n             * @param {jQuery} option\r\n             * @param {Boolean} checked\r\n             */\r\n            onChange : function(option, checked) {\r\n\r\n            },\r\n            /**\r\n             * Triggered when the dropdown is shown.\r\n             *\r\n             * @param {jQuery} event\r\n             */\r\n            onDropdownShow: function(event) {\r\n\r\n            },\r\n            /**\r\n             * Triggered when the dropdown is hidden.\r\n             *\r\n             * @param {jQuery} event\r\n             */\r\n            onDropdownHide: function(event) {\r\n\r\n            },\r\n            /**\r\n             * Triggered after the dropdown is shown.\r\n             *\r\n             * @param {jQuery} event\r\n             */\r\n            onDropdownShown: function(event) {\r\n\r\n            },\r\n            /**\r\n             * Triggered after the dropdown is hidden.\r\n             *\r\n             * @param {jQuery} event\r\n             */\r\n            onDropdownHidden: function(event) {\r\n\r\n            },\r\n            /**\r\n             * Triggered on select all.\r\n             */\r\n            onSelectAll: function() {\r\n\r\n            },\r\n            /**\r\n             * Triggered on deselect all.\r\n             */\r\n            onDeselectAll: function() {\r\n\r\n            },\r\n            /**\r\n             * Triggered after initializing.\r\n             *\r\n             * @param {jQuery} $select\r\n             * @param {jQuery} $container\r\n             */\r\n            onInitialized: function($select, $container) {\r\n\r\n            },\r\n            /**\r\n             * Triggered on filtering.\r\n             *\r\n             * @param {jQuery} $filter\r\n             */\r\n            onFiltering: function($filter) {\r\n\r\n            },\r\n            enableHTML: false,\r\n            buttonClass: 'btn btn-default',\r\n            inheritClass: false,\r\n            buttonWidth: 'auto',\r\n            buttonContainer: '<div class=\"btn-group\" />',\r\n            dropRight: false,\r\n            dropUp: false,\r\n            selectedClass: 'active',\r\n            // Maximum height of the dropdown menu.\r\n            // If maximum height is exceeded a scrollbar will be displayed.\r\n            maxHeight: false,\r\n            includeSelectAllOption: false,\r\n            includeSelectAllIfMoreThan: 0,\r\n            selectAllText: ' Select all',\r\n            selectAllValue: 'multiselect-all',\r\n            selectAllName: false,\r\n            selectAllNumber: true,\r\n            selectAllJustVisible: true,\r\n            enableFiltering: false,\r\n            enableCaseInsensitiveFiltering: false,\r\n            enableFullValueFiltering: false,\r\n            enableClickableOptGroups: false,\r\n            enableCollapsibleOptGroups: false,\r\n            filterPlaceholder: 'Search',\r\n            // possible options: 'text', 'value', 'both'\r\n            filterBehavior: 'text',\r\n            includeFilterClearBtn: true,\r\n            preventInputChangeEvent: false,\r\n            nonSelectedText: 'None selected',\r\n            nSelectedText: 'selected',\r\n            allSelectedText: 'All selected',\r\n            numberDisplayed: 3,\r\n            disableIfEmpty: false,\r\n            disabledText: '',\r\n            delimiterText: ', ',\r\n            templates: {\r\n                button: '<button type=\"button\" class=\"multiselect dropdown-toggle\" data-toggle=\"dropdown\"><span class=\"multiselect-selected-text\"></span> <b class=\"caret\"></b></button>',\r\n                ul: '<ul class=\"multiselect-container dropdown-menu\"></ul>',\r\n                filter: '<li class=\"multiselect-item multiselect-filter\"><div class=\"input-group\"><span class=\"input-group-addon\"><i class=\"glyphicon glyphicon-search\"></i></span><input class=\"form-control multiselect-search\" type=\"text\"></div></li>',\r\n                filterClearBtn: '<span class=\"input-group-btn\"><button class=\"btn btn-default multiselect-clear-filter\" type=\"button\"><i class=\"glyphicon glyphicon-remove-circle\"></i></button></span>',\r\n                li: '<li><a tabindex=\"0\"><label></label></a></li>',\r\n                divider: '<li class=\"multiselect-item divider\"></li>',\r\n                liGroup: '<li class=\"multiselect-item multiselect-group\"><label></label></li>'\r\n            }\r\n        },\r\n\r\n        constructor: Multiselect,\r\n\r\n        /**\r\n         * Builds the container of the multiselect.\r\n         */\r\n        buildContainer: function() {\r\n            this.$container = $(this.options.buttonContainer);\r\n            this.$container.on('show.bs.dropdown', this.options.onDropdownShow);\r\n            this.$container.on('hide.bs.dropdown', this.options.onDropdownHide);\r\n            this.$container.on('shown.bs.dropdown', this.options.onDropdownShown);\r\n            this.$container.on('hidden.bs.dropdown', this.options.onDropdownHidden);\r\n        },\r\n\r\n        /**\r\n         * Builds the button of the multiselect.\r\n         */\r\n        buildButton: function() {\r\n            this.$button = $(this.options.templates.button).addClass(this.options.buttonClass);\r\n            if (this.$select.attr('class') && this.options.inheritClass) {\r\n                this.$button.addClass(this.$select.attr('class'));\r\n            }\r\n            // Adopt active state.\r\n            if (this.$select.prop('disabled')) {\r\n                this.disable();\r\n            }\r\n            else {\r\n                this.enable();\r\n            }\r\n\r\n            // Manually add button width if set.\r\n            if (this.options.buttonWidth && this.options.buttonWidth !== 'auto') {\r\n                this.$button.css({\r\n                    'width' : '100%', //this.options.buttonWidth,\r\n                    'overflow' : 'hidden',\r\n                    'text-overflow' : 'ellipsis'\r\n                });\r\n                this.$container.css({\r\n                    'width': this.options.buttonWidth\r\n                });\r\n            }\r\n\r\n            // Keep the tab index from the select.\r\n            var tabindex = this.$select.attr('tabindex');\r\n            if (tabindex) {\r\n                this.$button.attr('tabindex', tabindex);\r\n            }\r\n\r\n            this.$container.prepend(this.$button);\r\n        },\r\n\r\n        /**\r\n         * Builds the ul representing the dropdown menu.\r\n         */\r\n        buildDropdown: function() {\r\n\r\n            // Build ul.\r\n            this.$ul = $(this.options.templates.ul);\r\n\r\n            if (this.options.dropRight) {\r\n                this.$ul.addClass('pull-right');\r\n            }\r\n\r\n            // Set max height of dropdown menu to activate auto scrollbar.\r\n            if (this.options.maxHeight) {\r\n                // TODO: Add a class for this option to move the css declarations.\r\n                this.$ul.css({\r\n                    'max-height': this.options.maxHeight + 'px',\r\n                    'overflow-y': 'auto',\r\n                    'overflow-x': 'hidden'\r\n                });\r\n            }\r\n\r\n            if (this.options.dropUp) {\r\n\r\n                var height = Math.min(this.options.maxHeight, $('option[data-role!=\"divider\"]', this.$select).length*26 + $('option[data-role=\"divider\"]', this.$select).length*19 + (this.options.includeSelectAllOption ? 26 : 0) + (this.options.enableFiltering || this.options.enableCaseInsensitiveFiltering ? 44 : 0));\r\n                var moveCalc = height + 34;\r\n\r\n                this.$ul.css({\r\n                    'max-height': height + 'px',\r\n                    'overflow-y': 'auto',\r\n                    'overflow-x': 'hidden',\r\n                    'margin-top': \"-\" + moveCalc + 'px'\r\n                });\r\n            }\r\n\r\n            this.$container.append(this.$ul);\r\n        },\r\n\r\n        /**\r\n         * Build the dropdown options and binds all necessary events.\r\n         *\r\n         * Uses createDivider and createOptionValue to create the necessary options.\r\n         */\r\n        buildDropdownOptions: function() {\r\n\r\n            this.$select.children().each($.proxy(function(index, element) {\r\n\r\n                var $element = $(element);\r\n                // Support optgroups and options without a group simultaneously.\r\n                var tag = $element.prop('tagName')\r\n                    .toLowerCase();\r\n\r\n                if ($element.prop('value') === this.options.selectAllValue) {\r\n                    return;\r\n                }\r\n\r\n                if (tag === 'optgroup') {\r\n                    this.createOptgroup(element);\r\n                }\r\n                else if (tag === 'option') {\r\n\r\n                    if ($element.data('role') === 'divider') {\r\n                        this.createDivider();\r\n                    }\r\n                    else {\r\n                        this.createOptionValue(element);\r\n                    }\r\n\r\n                }\r\n\r\n                // Other illegal tags will be ignored.\r\n            }, this));\r\n\r\n            // Bind the change event on the dropdown elements.\r\n            $('li:not(.multiselect-group) input', this.$ul).on('change', $.proxy(function(event) {\r\n                var $target = $(event.target);\r\n\r\n                var checked = $target.prop('checked') || false;\r\n                var isSelectAllOption = $target.val() === this.options.selectAllValue;\r\n\r\n                // Apply or unapply the configured selected class.\r\n                if (this.options.selectedClass) {\r\n                    if (checked) {\r\n                        $target.closest('li')\r\n                            .addClass(this.options.selectedClass);\r\n                    }\r\n                    else {\r\n                        $target.closest('li')\r\n                            .removeClass(this.options.selectedClass);\r\n                    }\r\n                }\r\n\r\n                // Get the corresponding option.\r\n                var value = $target.val();\r\n                var $option = this.getOptionByValue(value);\r\n\r\n                var $optionsNotThis = $('option', this.$select).not($option);\r\n                var $checkboxesNotThis = $('input', this.$container).not($target);\r\n\r\n                if (isSelectAllOption) {\r\n\r\n                    if (checked) {\r\n                        this.selectAll(this.options.selectAllJustVisible, true);\r\n                    }\r\n                    else {\r\n                        this.deselectAll(this.options.selectAllJustVisible, true);\r\n                    }\r\n                }\r\n                else {\r\n                    if (checked) {\r\n                        $option.prop('selected', true);\r\n\r\n                        if (this.options.multiple) {\r\n                            // Simply select additional option.\r\n                            $option.prop('selected', true);\r\n                        }\r\n                        else {\r\n                            // Unselect all other options and corresponding checkboxes.\r\n                            if (this.options.selectedClass) {\r\n                                $($checkboxesNotThis).closest('li').removeClass(this.options.selectedClass);\r\n                            }\r\n\r\n                            $($checkboxesNotThis).prop('checked', false);\r\n                            $optionsNotThis.prop('selected', false);\r\n\r\n                            // It's a single selection, so close.\r\n                            this.$button.click();\r\n                        }\r\n\r\n                        if (this.options.selectedClass === \"active\") {\r\n                            $optionsNotThis.closest(\"a\").css(\"outline\", \"\");\r\n                        }\r\n                    }\r\n                    else {\r\n                        // Unselect option.\r\n                        $option.prop('selected', false);\r\n                    }\r\n\r\n                    // To prevent select all from firing onChange: #575\r\n                    this.options.onChange($option, checked);\r\n\r\n                    // Do not update select all or optgroups on select all change!\r\n                    this.updateSelectAll();\r\n\r\n                    if (this.options.enableClickableOptGroups && this.options.multiple) {\r\n                        this.updateOptGroups();\r\n                    }\r\n                }\r\n\r\n                this.$select.change();\r\n                this.updateButtonText();\r\n\r\n                if(this.options.preventInputChangeEvent) {\r\n                    return false;\r\n                }\r\n            }, this));\r\n\r\n            $('li a', this.$ul).on('mousedown', function(e) {\r\n                if (e.shiftKey) {\r\n                    // Prevent selecting text by Shift+click\r\n                    return false;\r\n                }\r\n            });\r\n\r\n            $('li a', this.$ul).on('touchstart click', $.proxy(function(event) {\r\n                event.stopPropagation();\r\n\r\n                var $target = $(event.target);\r\n\r\n                if (event.shiftKey && this.options.multiple) {\r\n                    if($target.is(\"label\")){ // Handles checkbox selection manually (see https://github.com/davidstutz/bootstrap-multiselect/issues/431)\r\n                        event.preventDefault();\r\n                        $target = $target.find(\"input\");\r\n                        $target.prop(\"checked\", !$target.prop(\"checked\"));\r\n                    }\r\n                    var checked = $target.prop('checked') || false;\r\n\r\n                    if (this.lastToggledInput !== null && this.lastToggledInput !== $target) { // Make sure we actually have a range\r\n                        var from = $target.closest(\"li\").index();\r\n                        var to = this.lastToggledInput.closest(\"li\").index();\r\n\r\n                        if (from > to) { // Swap the indices\r\n                            var tmp = to;\r\n                            to = from;\r\n                            from = tmp;\r\n                        }\r\n\r\n                        // Make sure we grab all elements since slice excludes the last index\r\n                        ++to;\r\n\r\n                        // Change the checkboxes and underlying options\r\n                        var range = this.$ul.find(\"li\").slice(from, to).find(\"input\");\r\n\r\n                        range.prop('checked', checked);\r\n\r\n                        if (this.options.selectedClass) {\r\n                            range.closest('li')\r\n                                .toggleClass(this.options.selectedClass, checked);\r\n                        }\r\n\r\n                        for (var i = 0, j = range.length; i < j; i++) {\r\n                            var $checkbox = $(range[i]);\r\n\r\n                            var $option = this.getOptionByValue($checkbox.val());\r\n\r\n                            $option.prop('selected', checked);\r\n                        }\r\n                    }\r\n\r\n                    // Trigger the select \"change\" event\r\n                    $target.trigger(\"change\");\r\n                }\r\n\r\n                // Remembers last clicked option\r\n                if($target.is(\"input\") && !$target.closest(\"li\").is(\".multiselect-item\")){\r\n                    this.lastToggledInput = $target;\r\n                }\r\n\r\n                $target.blur();\r\n            }, this));\r\n\r\n            // Keyboard support.\r\n            this.$container.off('keydown.multiselect').on('keydown.multiselect', $.proxy(function(event) {\r\n                if ($('input[type=\"text\"]', this.$container).is(':focus')) {\r\n                    return;\r\n                }\r\n\r\n                if (event.keyCode === 9 && this.$container.hasClass('open')) {\r\n                    this.$button.click();\r\n                }\r\n                else {\r\n                    var $items = $(this.$container).find(\"li:not(.divider):not(.disabled) a\").filter(\":visible\");\r\n\r\n                    if (!$items.length) {\r\n                        return;\r\n                    }\r\n\r\n                    var index = $items.index($items.filter(':focus'));\r\n\r\n                    // Navigation up.\r\n                    if (event.keyCode === 38 && index > 0) {\r\n                        index--;\r\n                    }\r\n                    // Navigate down.\r\n                    else if (event.keyCode === 40 && index < $items.length - 1) {\r\n                        index++;\r\n                    }\r\n                    else if (!~index) {\r\n                        index = 0;\r\n                    }\r\n\r\n                    var $current = $items.eq(index);\r\n                    $current.focus();\r\n\r\n                    if (event.keyCode === 32 || event.keyCode === 13) {\r\n                        var $checkbox = $current.find('input');\r\n\r\n                        $checkbox.prop(\"checked\", !$checkbox.prop(\"checked\"));\r\n                        $checkbox.change();\r\n                    }\r\n\r\n                    event.stopPropagation();\r\n                    event.preventDefault();\r\n                }\r\n            }, this));\r\n\r\n            if (this.options.enableClickableOptGroups && this.options.multiple) {\r\n                $(\"li.multiselect-group input\", this.$ul).on(\"change\", $.proxy(function(event) {\r\n                    event.stopPropagation();\r\n\r\n                    var $target = $(event.target);\r\n                    var checked = $target.prop('checked') || false;\r\n\r\n                    var $li = $(event.target).closest('li');\r\n                    var $group = $li.nextUntil(\"li.multiselect-group\")\r\n                        .not('.multiselect-filter-hidden')\r\n                        .not('.disabled');\r\n\r\n                    var $inputs = $group.find(\"input\");\r\n\r\n                    var values = [];\r\n                    var $options = [];\r\n\r\n                    if (this.options.selectedClass) {\r\n                        if (checked) {\r\n                            $li.addClass(this.options.selectedClass);\r\n                        }\r\n                        else {\r\n                            $li.removeClass(this.options.selectedClass);\r\n                        }\r\n                    }\r\n\r\n                    $.each($inputs, $.proxy(function(index, input) {\r\n                        var value = $(input).val();\r\n                        var $option = this.getOptionByValue(value);\r\n\r\n                        if (checked) {\r\n                            $(input).prop('checked', true);\r\n                            $(input).closest('li')\r\n                                .addClass(this.options.selectedClass);\r\n\r\n                            $option.prop('selected', true);\r\n                        }\r\n                        else {\r\n                            $(input).prop('checked', false);\r\n                            $(input).closest('li')\r\n                                .removeClass(this.options.selectedClass);\r\n\r\n                            $option.prop('selected', false);\r\n                        }\r\n\r\n                        $options.push(this.getOptionByValue(value));\r\n                    }, this))\r\n\r\n                    // Cannot use select or deselect here because it would call updateOptGroups again.\r\n\r\n                    this.options.onChange($options, checked);\r\n\r\n                    this.updateButtonText();\r\n                    this.updateSelectAll();\r\n                }, this));\r\n            }\r\n\r\n            if (this.options.enableCollapsibleOptGroups && this.options.multiple) {\r\n                $(\"li.multiselect-group .caret-container\", this.$ul).on(\"click\", $.proxy(function(event) {\r\n                    var $li = $(event.target).closest('li');\r\n                    var $inputs = $li.nextUntil(\"li.multiselect-group\")\r\n                            .not('.multiselect-filter-hidden');\r\n\r\n                    var visible = true;\r\n                    $inputs.each(function() {\r\n                        visible = visible && $(this).is(':visible');\r\n                    });\r\n\r\n                    if (visible) {\r\n                        $inputs.hide()\r\n                            .addClass('multiselect-collapsible-hidden');\r\n                    }\r\n                    else {\r\n                        $inputs.show()\r\n                            .removeClass('multiselect-collapsible-hidden');\r\n                    }\r\n                }, this));\r\n\r\n                $(\"li.multiselect-all\", this.$ul).css('background', '#f3f3f3').css('border-bottom', '1px solid #eaeaea');\r\n                $(\"li.multiselect-all > a > label.checkbox\", this.$ul).css('padding', '3px 20px 3px 35px');\r\n                $(\"li.multiselect-group > a > input\", this.$ul).css('margin', '4px 0px 5px -20px');\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Create an option using the given select option.\r\n         *\r\n         * @param {jQuery} element\r\n         */\r\n        createOptionValue: function(element) {\r\n            var $element = $(element);\r\n            if ($element.is(':selected')) {\r\n                $element.prop('selected', true);\r\n            }\r\n\r\n            // Support the label attribute on options.\r\n            var label = this.options.optionLabel(element);\r\n            var classes = this.options.optionClass(element);\r\n            var value = $element.val();\r\n            var inputType = this.options.multiple ? \"checkbox\" : \"radio\";\r\n\r\n            var $li = $(this.options.templates.li);\r\n            var $label = $('label', $li);\r\n            $label.addClass(inputType);\r\n            $li.addClass(classes);\r\n\r\n            if (this.options.enableHTML) {\r\n                $label.html(\" \" + label);\r\n            }\r\n            else {\r\n                $label.text(\" \" + label);\r\n            }\r\n\r\n            var $checkbox = $('<input/>').attr('type', inputType);\r\n\r\n            var name = this.options.checkboxName($element);\r\n            if (name) {\r\n                $checkbox.attr('name', name);\r\n            }\r\n\r\n            $label.prepend($checkbox);\r\n\r\n            var selected = $element.prop('selected') || false;\r\n            $checkbox.val(value);\r\n\r\n            if (value === this.options.selectAllValue) {\r\n                $li.addClass(\"multiselect-item multiselect-all\");\r\n                $checkbox.parent().parent()\r\n                    .addClass('multiselect-all');\r\n            }\r\n\r\n            $label.attr('title', $element.attr('title'));\r\n\r\n            this.$ul.append($li);\r\n\r\n            if ($element.is(':disabled')) {\r\n                $checkbox.attr('disabled', 'disabled')\r\n                    .prop('disabled', true)\r\n                    .closest('a')\r\n                    .attr(\"tabindex\", \"-1\")\r\n                    .closest('li')\r\n                    .addClass('disabled');\r\n            }\r\n\r\n            $checkbox.prop('checked', selected);\r\n\r\n            if (selected && this.options.selectedClass) {\r\n                $checkbox.closest('li')\r\n                    .addClass(this.options.selectedClass);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Creates a divider using the given select option.\r\n         *\r\n         * @param {jQuery} element\r\n         */\r\n        createDivider: function(element) {\r\n            var $divider = $(this.options.templates.divider);\r\n            this.$ul.append($divider);\r\n        },\r\n\r\n        /**\r\n         * Creates an optgroup.\r\n         *\r\n         * @param {jQuery} group\r\n         */\r\n        createOptgroup: function(group) {\r\n            var label = $(group).attr(\"label\");\r\n            var value = $(group).attr(\"value\");\r\n            var $li = $('<li class=\"multiselect-item multiselect-group\"><a href=\"javascript:void(0);\"><label><b></b></label></a></li>');\r\n\r\n            var classes = this.options.optionClass(group);\r\n            $li.addClass(classes);\r\n\r\n            if (this.options.enableHTML) {\r\n                $('label b', $li).html(\" \" + label);\r\n            }\r\n            else {\r\n                $('label b', $li).text(\" \" + label);\r\n            }\r\n\r\n            if (this.options.enableCollapsibleOptGroups && this.options.multiple) {\r\n                $('a', $li).append('<span class=\"caret-container\"><b class=\"caret\"></b></span>');\r\n            }\r\n\r\n            if (this.options.enableClickableOptGroups && this.options.multiple) {\r\n                $('a label', $li).prepend('<input type=\"checkbox\" value=\"' + value + '\"/>');\r\n            }\r\n\r\n            if ($(group).is(':disabled')) {\r\n                $li.addClass('disabled');\r\n            }\r\n\r\n            this.$ul.append($li);\r\n\r\n            $(\"option\", group).each($.proxy(function($, group) {\r\n                this.createOptionValue(group);\r\n            }, this))\r\n        },\r\n\r\n        /**\r\n         * Build the select all.\r\n         *\r\n         * Checks if a select all has already been created.\r\n         */\r\n        buildSelectAll: function() {\r\n            if (typeof this.options.selectAllValue === 'number') {\r\n                this.options.selectAllValue = this.options.selectAllValue.toString();\r\n            }\r\n\r\n            var alreadyHasSelectAll = this.hasSelectAll();\r\n\r\n            if (!alreadyHasSelectAll && this.options.includeSelectAllOption && this.options.multiple\r\n                    && $('option', this.$select).length > this.options.includeSelectAllIfMoreThan) {\r\n\r\n                // Check whether to add a divider after the select all.\r\n                if (this.options.includeSelectAllDivider) {\r\n                    this.$ul.prepend($(this.options.templates.divider));\r\n                }\r\n\r\n                var $li = $(this.options.templates.li);\r\n                $('label', $li).addClass(\"checkbox\");\r\n\r\n                if (this.options.enableHTML) {\r\n                    $('label', $li).html(\" \" + this.options.selectAllText);\r\n                }\r\n                else {\r\n                    $('label', $li).text(\" \" + this.options.selectAllText);\r\n                }\r\n\r\n                if (this.options.selectAllName) {\r\n                    $('label', $li).prepend('<input type=\"checkbox\" name=\"' + this.options.selectAllName + '\" />');\r\n                }\r\n                else {\r\n                    $('label', $li).prepend('<input type=\"checkbox\" />');\r\n                }\r\n\r\n                var $checkbox = $('input', $li);\r\n                $checkbox.val(this.options.selectAllValue);\r\n\r\n                $li.addClass(\"multiselect-item multiselect-all\");\r\n                $checkbox.parent().parent()\r\n                    .addClass('multiselect-all');\r\n\r\n                this.$ul.prepend($li);\r\n\r\n                $checkbox.prop('checked', false);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Builds the filter.\r\n         */\r\n        buildFilter: function() {\r\n\r\n            // Build filter if filtering OR case insensitive filtering is enabled and the number of options exceeds (or equals) enableFilterLength.\r\n            if (this.options.enableFiltering || this.options.enableCaseInsensitiveFiltering) {\r\n                var enableFilterLength = Math.max(this.options.enableFiltering, this.options.enableCaseInsensitiveFiltering);\r\n\r\n                if (this.$select.find('option').length >= enableFilterLength) {\r\n\r\n                    this.$filter = $(this.options.templates.filter);\r\n                    $('input', this.$filter).attr('placeholder', this.options.filterPlaceholder);\r\n\r\n                    // Adds optional filter clear button\r\n                    if(this.options.includeFilterClearBtn) {\r\n                        var clearBtn = $(this.options.templates.filterClearBtn);\r\n                        clearBtn.on('click', $.proxy(function(event){\r\n                            clearTimeout(this.searchTimeout);\r\n\r\n                            this.$filter.find('.multiselect-search').val('');\r\n                            $('li', this.$ul).show().removeClass('multiselect-filter-hidden');\r\n\r\n                            this.updateSelectAll();\r\n\r\n                            if (this.options.enableClickableOptGroups && this.options.multiple) {\r\n                                this.updateOptGroups();\r\n                            }\r\n\r\n                        }, this));\r\n                        this.$filter.find('.input-group').append(clearBtn);\r\n                    }\r\n\r\n                    this.$ul.prepend(this.$filter);\r\n\r\n                    this.$filter.val(this.query).on('click', function(event) {\r\n                        event.stopPropagation();\r\n                    }).on('input keydown', $.proxy(function(event) {\r\n                        // Cancel enter key default behaviour\r\n                        if (event.which === 13) {\r\n                          event.preventDefault();\r\n                      }\r\n\r\n                        // This is useful to catch \"keydown\" events after the browser has updated the control.\r\n                        clearTimeout(this.searchTimeout);\r\n\r\n                        this.searchTimeout = this.asyncFunction($.proxy(function() {\r\n\r\n                            if (this.query !== event.target.value) {\r\n                                this.query = event.target.value;\r\n\r\n                                var currentGroup, currentGroupVisible;\r\n                                $.each($('li', this.$ul), $.proxy(function(index, element) {\r\n                                    var value = $('input', element).length > 0 ? $('input', element).val() : \"\";\r\n                                    var text = $('label', element).text();\r\n\r\n                                    var filterCandidate = '';\r\n                                    if ((this.options.filterBehavior === 'text')) {\r\n                                        filterCandidate = text;\r\n                                    }\r\n                                    else if ((this.options.filterBehavior === 'value')) {\r\n                                        filterCandidate = value;\r\n                                    }\r\n                                    else if (this.options.filterBehavior === 'both') {\r\n                                        filterCandidate = text + '\\n' + value;\r\n                                    }\r\n\r\n                                    if (value !== this.options.selectAllValue && text) {\r\n\r\n                                        // By default lets assume that element is not\r\n                                        // interesting for this search.\r\n                                        var showElement = false;\r\n\r\n                                        if (this.options.enableCaseInsensitiveFiltering) {\r\n                                            filterCandidate = filterCandidate.toLowerCase();\r\n                                            this.query = this.query.toLowerCase();\r\n                                        }\r\n\r\n                                        if (this.options.enableFullValueFiltering && this.options.filterBehavior !== 'both') {\r\n                                            var valueToMatch = filterCandidate.trim().substring(0, this.query.length);\r\n                                            if (this.query.indexOf(valueToMatch) > -1) {\r\n                                                showElement = true;\r\n                                            }\r\n                                        }\r\n                                        else if (filterCandidate.indexOf(this.query) > -1) {\r\n                                            showElement = true;\r\n                                        }\r\n\r\n                                        // Toggle current element (group or group item) according to showElement boolean.\r\n                                        $(element).toggle(showElement)\r\n                                            .toggleClass('multiselect-filter-hidden', !showElement);\r\n\r\n                                        // Differentiate groups and group items.\r\n                                        if ($(element).hasClass('multiselect-group')) {\r\n                                            // Remember group status.\r\n                                            currentGroup = element;\r\n                                            currentGroupVisible = showElement;\r\n                                        }\r\n                                        else {\r\n                                            // Show group name when at least one of its items is visible.\r\n                                            if (showElement) {\r\n                                                $(currentGroup).show()\r\n                                                    .removeClass('multiselect-filter-hidden');\r\n                                            }\r\n\r\n                                            // Show all group items when group name satisfies filter.\r\n                                            if (!showElement && currentGroupVisible) {\r\n                                                $(element).show()\r\n                                                    .removeClass('multiselect-filter-hidden');\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                }, this));\r\n                            }\r\n\r\n                            this.updateSelectAll();\r\n\r\n                            if (this.options.enableClickableOptGroups && this.options.multiple) {\r\n                                this.updateOptGroups();\r\n                            }\r\n\r\n                            this.options.onFiltering(event.target);\r\n\r\n                        }, this), 300, this);\r\n                    }, this));\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Unbinds the whole plugin.\r\n         */\r\n        destroy: function() {\r\n            this.$container.remove();\r\n            this.$select.show();\r\n\r\n            // reset original state\r\n            this.$select.prop('disabled', this.options.wasDisabled);\r\n\r\n            this.$select.data('multiselect', null);\r\n        },\r\n\r\n        /**\r\n         * Refreshs the multiselect based on the selected options of the select.\r\n         */\r\n        refresh: function () {\r\n            var inputs = $.map($('li input', this.$ul), $);\r\n\r\n            $('option', this.$select).each($.proxy(function (index, element) {\r\n                var $elem = $(element);\r\n                var value = $elem.val();\r\n                var $input;\r\n                for (var i = inputs.length; 0 < i--; /**/) {\r\n                    if (value !== ($input = inputs[i]).val())\r\n                        continue; // wrong li\r\n\r\n                    if ($elem.is(':selected')) {\r\n                        $input.prop('checked', true);\r\n\r\n                        if (this.options.selectedClass) {\r\n                            $input.closest('li')\r\n                                .addClass(this.options.selectedClass);\r\n                        }\r\n                    }\r\n                    else {\r\n                        $input.prop('checked', false);\r\n\r\n                        if (this.options.selectedClass) {\r\n                            $input.closest('li')\r\n                                .removeClass(this.options.selectedClass);\r\n                        }\r\n                    }\r\n\r\n                    if ($elem.is(\":disabled\")) {\r\n                        $input.attr('disabled', 'disabled')\r\n                            .prop('disabled', true)\r\n                            .closest('li')\r\n                            .addClass('disabled');\r\n                    }\r\n                    else {\r\n                        $input.prop('disabled', false)\r\n                            .closest('li')\r\n                            .removeClass('disabled');\r\n                    }\r\n                    break; // assumes unique values\r\n                }\r\n            }, this));\r\n\r\n            this.updateButtonText();\r\n            this.updateSelectAll();\r\n\r\n            if (this.options.enableClickableOptGroups && this.options.multiple) {\r\n                this.updateOptGroups();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Select all options of the given values.\r\n         *\r\n         * If triggerOnChange is set to true, the on change event is triggered if\r\n         * and only if one value is passed.\r\n         *\r\n         * @param {Array} selectValues\r\n         * @param {Boolean} triggerOnChange\r\n         */\r\n        select: function(selectValues, triggerOnChange) {\r\n            if(!$.isArray(selectValues)) {\r\n                selectValues = [selectValues];\r\n            }\r\n\r\n            for (var i = 0; i < selectValues.length; i++) {\r\n                var value = selectValues[i];\r\n\r\n                if (value === null || value === undefined) {\r\n                    continue;\r\n                }\r\n\r\n                var $option = this.getOptionByValue(value);\r\n                var $checkbox = this.getInputByValue(value);\r\n\r\n                if($option === undefined || $checkbox === undefined) {\r\n                    continue;\r\n                }\r\n\r\n                if (!this.options.multiple) {\r\n                    this.deselectAll(false);\r\n                }\r\n\r\n                if (this.options.selectedClass) {\r\n                    $checkbox.closest('li')\r\n                        .addClass(this.options.selectedClass);\r\n                }\r\n\r\n                $checkbox.prop('checked', true);\r\n                $option.prop('selected', true);\r\n\r\n                if (triggerOnChange) {\r\n                    this.options.onChange($option, true);\r\n                }\r\n            }\r\n\r\n            this.updateButtonText();\r\n            this.updateSelectAll();\r\n\r\n            if (this.options.enableClickableOptGroups && this.options.multiple) {\r\n                this.updateOptGroups();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Clears all selected items.\r\n         */\r\n        clearSelection: function () {\r\n            this.deselectAll(false);\r\n            this.updateButtonText();\r\n            this.updateSelectAll();\r\n\r\n            if (this.options.enableClickableOptGroups && this.options.multiple) {\r\n                this.updateOptGroups();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Deselects all options of the given values.\r\n         *\r\n         * If triggerOnChange is set to true, the on change event is triggered, if\r\n         * and only if one value is passed.\r\n         *\r\n         * @param {Array} deselectValues\r\n         * @param {Boolean} triggerOnChange\r\n         */\r\n        deselect: function(deselectValues, triggerOnChange) {\r\n            if(!$.isArray(deselectValues)) {\r\n                deselectValues = [deselectValues];\r\n            }\r\n\r\n            for (var i = 0; i < deselectValues.length; i++) {\r\n                var value = deselectValues[i];\r\n\r\n                if (value === null || value === undefined) {\r\n                    continue;\r\n                }\r\n\r\n                var $option = this.getOptionByValue(value);\r\n                var $checkbox = this.getInputByValue(value);\r\n\r\n                if($option === undefined || $checkbox === undefined) {\r\n                    continue;\r\n                }\r\n\r\n                if (this.options.selectedClass) {\r\n                    $checkbox.closest('li')\r\n                        .removeClass(this.options.selectedClass);\r\n                }\r\n\r\n                $checkbox.prop('checked', false);\r\n                $option.prop('selected', false);\r\n\r\n                if (triggerOnChange) {\r\n                    this.options.onChange($option, false);\r\n                }\r\n            }\r\n\r\n            this.updateButtonText();\r\n            this.updateSelectAll();\r\n\r\n            if (this.options.enableClickableOptGroups && this.options.multiple) {\r\n                this.updateOptGroups();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Selects all enabled & visible options.\r\n         *\r\n         * If justVisible is true or not specified, only visible options are selected.\r\n         *\r\n         * @param {Boolean} justVisible\r\n         * @param {Boolean} triggerOnSelectAll\r\n         */\r\n        selectAll: function (justVisible, triggerOnSelectAll) {\r\n\r\n            var justVisible = typeof justVisible === 'undefined' ? true : justVisible;\r\n            var allLis = $(\"li:not(.divider):not(.disabled):not(.multiselect-group)\", this.$ul);\r\n            var visibleLis = $(\"li:not(.divider):not(.disabled):not(.multiselect-group):not(.multiselect-filter-hidden):not(.multiselect-collapisble-hidden)\", this.$ul).filter(':visible');\r\n\r\n            if(justVisible) {\r\n                $('input:enabled' , visibleLis).prop('checked', true);\r\n                visibleLis.addClass(this.options.selectedClass);\r\n\r\n                $('input:enabled' , visibleLis).each($.proxy(function(index, element) {\r\n                    var value = $(element).val();\r\n                    var option = this.getOptionByValue(value);\r\n                    $(option).prop('selected', true);\r\n                }, this));\r\n            }\r\n            else {\r\n                $('input:enabled' , allLis).prop('checked', true);\r\n                allLis.addClass(this.options.selectedClass);\r\n\r\n                $('input:enabled' , allLis).each($.proxy(function(index, element) {\r\n                    var value = $(element).val();\r\n                    var option = this.getOptionByValue(value);\r\n                    $(option).prop('selected', true);\r\n                }, this));\r\n            }\r\n\r\n            $('li input[value=\"' + this.options.selectAllValue + '\"]', this.$ul).prop('checked', true);\r\n\r\n            if (this.options.enableClickableOptGroups && this.options.multiple) {\r\n                this.updateOptGroups();\r\n            }\r\n\r\n            if (triggerOnSelectAll) {\r\n                this.options.onSelectAll();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Deselects all options.\r\n         *\r\n         * If justVisible is true or not specified, only visible options are deselected.\r\n         *\r\n         * @param {Boolean} justVisible\r\n         */\r\n        deselectAll: function (justVisible, triggerOnDeselectAll) {\r\n\r\n            var justVisible = typeof justVisible === 'undefined' ? true : justVisible;\r\n            var allLis = $(\"li:not(.divider):not(.disabled):not(.multiselect-group)\", this.$ul);\r\n            var visibleLis = $(\"li:not(.divider):not(.disabled):not(.multiselect-group):not(.multiselect-filter-hidden):not(.multiselect-collapisble-hidden)\", this.$ul).filter(':visible');\r\n\r\n            if(justVisible) {\r\n                $('input[type=\"checkbox\"]:enabled' , visibleLis).prop('checked', false);\r\n                visibleLis.removeClass(this.options.selectedClass);\r\n\r\n                $('input[type=\"checkbox\"]:enabled' , visibleLis).each($.proxy(function(index, element) {\r\n                    var value = $(element).val();\r\n                    var option = this.getOptionByValue(value);\r\n                    $(option).prop('selected', false);\r\n                }, this));\r\n            }\r\n            else {\r\n                $('input[type=\"checkbox\"]:enabled' , allLis).prop('checked', false);\r\n                allLis.removeClass(this.options.selectedClass);\r\n\r\n                $('input[type=\"checkbox\"]:enabled' , allLis).each($.proxy(function(index, element) {\r\n                    var value = $(element).val();\r\n                    var option = this.getOptionByValue(value);\r\n                    $(option).prop('selected', false);\r\n                }, this));\r\n            }\r\n\r\n            $('li input[value=\"' + this.options.selectAllValue + '\"]', this.$ul).prop('checked', false);\r\n\r\n            if (this.options.enableClickableOptGroups && this.options.multiple) {\r\n                this.updateOptGroups();\r\n            }\r\n\r\n            if (triggerOnDeselectAll) {\r\n                this.options.onDeselectAll();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Rebuild the plugin.\r\n         *\r\n         * Rebuilds the dropdown, the filter and the select all option.\r\n         */\r\n        rebuild: function() {\r\n            this.$ul.html('');\r\n\r\n            // Important to distinguish between radios and checkboxes.\r\n            this.options.multiple = this.$select.attr('multiple') === \"multiple\";\r\n\r\n            this.buildSelectAll();\r\n            this.buildDropdownOptions();\r\n            this.buildFilter();\r\n\r\n            this.updateButtonText();\r\n            this.updateSelectAll(true);\r\n\r\n            if (this.options.enableClickableOptGroups && this.options.multiple) {\r\n                this.updateOptGroups();\r\n            }\r\n\r\n            if (this.options.disableIfEmpty && $('option', this.$select).length <= 0) {\r\n                this.disable();\r\n            }\r\n            else {\r\n                this.enable();\r\n            }\r\n\r\n            if (this.options.dropRight) {\r\n                this.$ul.addClass('pull-right');\r\n            }\r\n        },\r\n\r\n        /**\r\n         * The provided data will be used to build the dropdown.\r\n         */\r\n        dataprovider: function(dataprovider) {\r\n\r\n            var groupCounter = 0;\r\n            var $select = this.$select.empty();\r\n\r\n            $.each(dataprovider, function (index, option) {\r\n                var $tag;\r\n\r\n                if ($.isArray(option.children)) { // create optiongroup tag\r\n                    groupCounter++;\r\n\r\n                    $tag = $('<optgroup/>').attr({\r\n                        label: option.label || 'Group ' + groupCounter,\r\n                        disabled: !!option.disabled\r\n                    });\r\n\r\n                    forEach(option.children, function(subOption) { // add children option tags\r\n                        var attributes = {\r\n                            value: subOption.value,\r\n                            label: subOption.label || subOption.value,\r\n                            title: subOption.title,\r\n                            selected: !!subOption.selected,\r\n                            disabled: !!subOption.disabled\r\n                        };\r\n\r\n                        //Loop through attributes object and add key-value for each attribute\r\n                       for (var key in subOption.attributes) {\r\n                            attributes['data-' + key] = subOption.attributes[key];\r\n                       }\r\n                         //Append original attributes + new data attributes to option\r\n                        $tag.append($('<option/>').attr(attributes));\r\n                    });\r\n                }\r\n                else {\r\n\r\n                    var attributes = {\r\n                        'value': option.value,\r\n                        'label': option.label || option.value,\r\n                        'title': option.title,\r\n                        'class': option.class,\r\n                        'selected': !!option.selected,\r\n                        'disabled': !!option.disabled\r\n                    };\r\n                    //Loop through attributes object and add key-value for each attribute\r\n                    for (var key in option.attributes) {\r\n                      attributes['data-' + key] = option.attributes[key];\r\n                    }\r\n                    //Append original attributes + new data attributes to option\r\n                    $tag = $('<option/>').attr(attributes);\r\n\r\n                    $tag.text(option.label || option.value);\r\n                }\r\n\r\n                $select.append($tag);\r\n            });\r\n\r\n            this.rebuild();\r\n        },\r\n\r\n        /**\r\n         * Enable the multiselect.\r\n         */\r\n        enable: function() {\r\n            this.$select.prop('disabled', false);\r\n            this.$button.prop('disabled', false)\r\n                .removeClass('disabled');\r\n        },\r\n\r\n        /**\r\n         * Disable the multiselect.\r\n         */\r\n        disable: function() {\r\n            this.$select.prop('disabled', true);\r\n            this.$button.prop('disabled', true)\r\n                .addClass('disabled');\r\n        },\r\n\r\n        /**\r\n         * Set the options.\r\n         *\r\n         * @param {Array} options\r\n         */\r\n        setOptions: function(options) {\r\n            this.options = this.mergeOptions(options);\r\n        },\r\n\r\n        /**\r\n         * Merges the given options with the default options.\r\n         *\r\n         * @param {Array} options\r\n         * @returns {Array}\r\n         */\r\n        mergeOptions: function(options) {\r\n            return $.extend(true, {}, this.defaults, this.options, options);\r\n        },\r\n\r\n        /**\r\n         * Checks whether a select all checkbox is present.\r\n         *\r\n         * @returns {Boolean}\r\n         */\r\n        hasSelectAll: function() {\r\n            return $('li.multiselect-all', this.$ul).length > 0;\r\n        },\r\n\r\n        /**\r\n         * Update opt groups.\r\n         */\r\n        updateOptGroups: function() {\r\n            var $groups = $('li.multiselect-group', this.$ul)\r\n            var selectedClass = this.options.selectedClass;\r\n\r\n            $groups.each(function() {\r\n                var $options = $(this).nextUntil('li.multiselect-group')\r\n                    .not('.multiselect-filter-hidden')\r\n                    .not('.disabled');\r\n\r\n                var checked = true;\r\n                $options.each(function() {\r\n                    var $input = $('input', this);\r\n\r\n                    if (!$input.prop('checked')) {\r\n                        checked = false;\r\n                    }\r\n                });\r\n\r\n                if (selectedClass) {\r\n                    if (checked) {\r\n                        $(this).addClass(selectedClass);\r\n                    }\r\n                    else {\r\n                        $(this).removeClass(selectedClass);\r\n                    }\r\n                }\r\n\r\n                $('input', this).prop('checked', checked);\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Updates the select all checkbox based on the currently displayed and selected checkboxes.\r\n         */\r\n        updateSelectAll: function(notTriggerOnSelectAll) {\r\n            if (this.hasSelectAll()) {\r\n                var allBoxes = $(\"li:not(.multiselect-item):not(.multiselect-filter-hidden):not(.multiselect-group):not(.disabled) input:enabled\", this.$ul);\r\n                var allBoxesLength = allBoxes.length;\r\n                var checkedBoxesLength = allBoxes.filter(\":checked\").length;\r\n                var selectAllLi  = $(\"li.multiselect-all\", this.$ul);\r\n                var selectAllInput = selectAllLi.find(\"input\");\r\n\r\n                if (checkedBoxesLength > 0 && checkedBoxesLength === allBoxesLength) {\r\n                    selectAllInput.prop(\"checked\", true);\r\n                    selectAllLi.addClass(this.options.selectedClass);\r\n                }\r\n                else {\r\n                    selectAllInput.prop(\"checked\", false);\r\n                    selectAllLi.removeClass(this.options.selectedClass);\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Update the button text and its title based on the currently selected options.\r\n         */\r\n        updateButtonText: function() {\r\n            var options = this.getSelected();\r\n\r\n            // First update the displayed button text.\r\n            if (this.options.enableHTML) {\r\n                $('.multiselect .multiselect-selected-text', this.$container).html(this.options.buttonText(options, this.$select));\r\n            }\r\n            else {\r\n                $('.multiselect .multiselect-selected-text', this.$container).text(this.options.buttonText(options, this.$select));\r\n            }\r\n\r\n            // Now update the title attribute of the button.\r\n            $('.multiselect', this.$container).attr('title', this.options.buttonTitle(options, this.$select));\r\n        },\r\n\r\n        /**\r\n         * Get all selected options.\r\n         *\r\n         * @returns {jQUery}\r\n         */\r\n        getSelected: function() {\r\n            return $('option', this.$select).filter(\":selected\");\r\n        },\r\n\r\n        /**\r\n         * Gets a select option by its value.\r\n         *\r\n         * @param {String} value\r\n         * @returns {jQuery}\r\n         */\r\n        getOptionByValue: function (value) {\r\n\r\n            var options = $('option', this.$select);\r\n            var valueToCompare = value.toString();\r\n\r\n            for (var i = 0; i < options.length; i = i + 1) {\r\n                var option = options[i];\r\n                if (option.value === valueToCompare) {\r\n                    return $(option);\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Get the input (radio/checkbox) by its value.\r\n         *\r\n         * @param {String} value\r\n         * @returns {jQuery}\r\n         */\r\n        getInputByValue: function (value) {\r\n\r\n            var checkboxes = $('li input:not(.multiselect-search)', this.$ul);\r\n            var valueToCompare = value.toString();\r\n\r\n            for (var i = 0; i < checkboxes.length; i = i + 1) {\r\n                var checkbox = checkboxes[i];\r\n                if (checkbox.value === valueToCompare) {\r\n                    return $(checkbox);\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Used for knockout integration.\r\n         */\r\n        updateOriginalOptions: function() {\r\n            this.originalOptions = this.$select.clone()[0].options;\r\n        },\r\n\r\n        asyncFunction: function(callback, timeout, self) {\r\n            var args = Array.prototype.slice.call(arguments, 3);\r\n            return setTimeout(function() {\r\n                callback.apply(self || window, args);\r\n            }, timeout);\r\n        },\r\n\r\n        setAllSelectedText: function(allSelectedText) {\r\n            this.options.allSelectedText = allSelectedText;\r\n            this.updateButtonText();\r\n        }\r\n    };\r\n\r\n    $.fn.multiselect = function(option, parameter, extraOptions) {\r\n        return this.each(function() {\r\n            var data = $(this).data('multiselect');\r\n            var options = typeof option === 'object' && option;\r\n\r\n            // Initialize the multiselect.\r\n            if (!data) {\r\n                data = new Multiselect(this, options);\r\n                $(this).data('multiselect', data);\r\n            }\r\n\r\n            // Call multiselect method.\r\n            if (typeof option === 'string') {\r\n                data[option](parameter, extraOptions);\r\n\r\n                if (option === 'destroy') {\r\n                    $(this).data('multiselect', false);\r\n                }\r\n            }\r\n        });\r\n    };\r\n\r\n    $.fn.multiselect.Constructor = Multiselect;\r\n\r\n    $(function() {\r\n        $(\"select[data-role=multiselect]\").multiselect();\r\n    });\r\n\r\n}(window.jQuery);"]}